@using PeliculaIISemanaIV.Client.Pages.Components

<div class="container">
    <div class="jumbotron">
        @* Para trabajar con formularios (Campos)*@
        <EditForm Model="Actor" OnValidSubmit="OnValidSubmit">
            <DataAnnotationsValidator></DataAnnotationsValidator>
            @* Input para el nombre InputText*@
            <div class="mb-3">
                <InputText class="form-control" @bind-Value="Actor.Name" placeholder="Nombre actor"></InputText>
                <ValidationMessage For="@(()=>Actor.Name)"></ValidationMessage>
            </div>
            @* Input para la fecha de naciemiento: InputDate*@
            <div class="mb-3">
                <InputDate class="form-control" @bind-Value="Actor.BirthDate" placeholder="Nombre actor"></InputDate>
                <ValidationMessage For="@(()=>Actor.BirthDate)"></ValidationMessage>
            </div>
            @* Input de cantidad de créditos: InputNumber*@
            <div class="mb-3">
                <InputNumber class="form-control" @bind-Value="Actor.KnowCredits" placeholder="Nombre actor">
                </InputNumber>
                <ValidationMessage For="@(()=>Actor.KnowCredits)"></ValidationMessage>
            </div>
            @*Campo que permite el cargue de una sola foto*@
            @* <div class="form-group">
                <ImageComponent Label="photo" ImageSelected="ImageSelected" ImageOptonal="@imageOptional"></ImageComponent>
                </div> *@
            <div class="form-group">
                <ImageComponent Label="photo" ImageSelected="ImageSelected" ImageURL="@imageURL"></ImageComponent>
            </div>
            <div class="form-group">
                <button class="btn btn-success">Guardar</button>
            </div>
        </EditForm>
    </div>
</div>
@code {
    string imageURL;
    [Parameter] public Actor Actor { get; set; }
    [Parameter] public EventCallback OnValidSubmit { get; set; }

    protected override void OnInitialized()
    {
        if (!string.IsNullOrEmpty(Actor.Photo))
        {
            imageURL = Actor.Photo;
            Actor.Photo = null;
        }
    }
    @* Imagen principal seleccionada *@
    private void ImageSelected(string imageB64)
    {
        Actor.Photo = imageB64;
        imageURL = null;
    }
}


@*Recordar que estos métodos se crean en método create y edit *@
@* Validar que haya una imagen cargada (Ejem cambio de foto portada, perfil ...) *@
@*Hasta el min 45:00 código bien, inicio de creación de repositorio en GitHub VER SPRINT INDIVIDUAL MIN 50:00 CRUD (POR
    AHORA EDITAR, AÑADIR Y LISTAR - VALIDACIONES*@
